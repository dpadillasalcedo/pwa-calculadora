<script>
/* =========================================================
   UTILIDADES
========================================================= */
function getValue(id) {
  const el = document.getElementById(id);
  return el && el.value !== "" ? parseInt(el.value, 10) : 0;
}

function resetSelects(prefix) {
  document
    .querySelectorAll(`select[id^="${prefix}"]`)
    .forEach(s => s.value = "");
}

/* =========================================================
   SOFA-2
   Mortalidad aproximada según score total
========================================================= */
function calcSOFA() {
  const total =
    getValue("sofa_neuro") +
    getValue("sofa_resp") +
    getValue("sofa_cardio") +
    getValue("sofa_liver") +
    getValue("sofa_renal") +
    getValue("sofa_hemo");

  let risk = "";
  let mortality = "";

  if (total <= 1) {
    risk = "Riesgo bajo";
    mortality = "~5%";
  } else if (total <= 6) {
    risk = "Disfunción orgánica moderada";
    mortality = "10–20%";
  } else if (total <= 9) {
    risk = "Disfunción orgánica severa";
    mortality = "25–40%";
  } else {
    risk = "Alto riesgo de mortalidad";
    mortality = ">50%";
  }

  document.getElementById("sofa_result").textContent =
    `SOFA-2 total: ${total} — ${risk} · Mortalidad estimada: ${mortality}`;
}

function resetSOFA() {
  resetSelects("sofa_");
  document.getElementById("sofa_result").textContent = "";
}

/* =========================================================
   APACHE II
   Mortalidad aproximada (%)
========================================================= */
function calcAPACHE() {
  const total =
    getValue("ap_temp") +
    getValue("ap_map") +
    getValue("ap_hr") +
    getValue("ap_rr") +
    getValue("ap_oxygen") +
    getValue("ap_ph") +
    getValue("ap_na") +
    getValue("ap_k") +
    getValue("ap_cr") +
    getValue("ap_hct") +
    getValue("ap_wbc") +
    getValue("ap_gcs") +
    getValue("ap_age") +
    getValue("ap_chronic");

  let risk = "";
  let mortality = "";

  if (total < 10) {
    risk = "Riesgo bajo";
    mortality = "<10%";
  } else if (total < 20) {
    risk = "Riesgo moderado";
    mortality = "15–25%";
  } else if (total < 30) {
    risk = "Riesgo alto";
    mortality = "40–55%";
  } else {
    risk = "Riesgo muy alto";
    mortality = ">75%";
  }

  document.getElementById("apache_result").textContent =
    `APACHE II total: ${total} — ${risk} · Mortalidad estimada: ${mortality}`;
}

function resetAPACHE() {
  resetSelects("ap_");
  document.getElementById("apache_result").textContent = "";
}

/* =========================================================
   SAPS II
   Mortalidad aproximada (%)
========================================================= */
function calcSAPS() {
  const total =
    getValue("saps_age") +
    getValue("saps_hr") +
    getValue("saps_sys") +
    getValue("saps_temp") +
    getValue("saps_gcs") +
    getValue("saps_uo") +
    getValue("saps_bun") +
    getValue("saps_wbc") +
    getValue("saps_k") +
    getValue("saps_na") +
    getValue("saps_hco3") +
    getValue("saps_bili") +
    getValue("saps_adm");

  let risk = "";
  let mortality = "";

  if (total < 30) {
    risk = "Riesgo bajo";
    mortality = "<10%";
  } else if (total < 50) {
    risk = "Riesgo moderado";
    mortality = "20–35%";
  } else if (total < 70) {
    risk = "Riesgo alto";
    mortality = "50–65%";
  } else {
    risk = "Riesgo muy alto";
    mortality = ">75%";
  }

  document.getElementById("saps_result").textContent =
    `SAPS II total: ${total} — ${risk} · Mortalidad estimada: ${mortality}`;
}

function resetSAPS() {
  resetSelects("saps_");
  document.getElementById("saps_result").textContent = "";
}
</script>

   /* =========================
   BREADCRUMB – TEXTO BLANCO
========================= */
.top-nav,
.top-nav a,
.top-nav span,
.top-nav [aria-current="page"] {
  color: #ffffff;
}

/* Hover del link */
.top-nav a:hover {
  color: #38bdf8;
}

/* Separador › un poco más suave */
.top-nav span[aria-hidden="true"] {
  color: #cbd5e1;
}

/* =========================
   FOOTER – TEXTO BLANCO
========================= */
footer,
footer a,
footer span,
footer p {
  color: #ffffff;
}

/* Hover links footer */
footer a:hover {
  color: #38bdf8;
  text-decoration: underline;
}

