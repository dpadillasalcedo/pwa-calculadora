<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calculadora UCI</title>
  <link rel="stylesheet" href="style.css" />
  <meta name="theme-color" content="#0b5fff" />
  <link rel="manifest" href="manifest.json" />
</head>

<body>
  <div class="app">
    <header class="app-header">
      <div>
        <h1>Calculadora UCI</h1>
        <p class="subtitle">Monitoreo hemodinámico · respiratorio · metabólico</p>
      </div>
      <div class="pill">Uso clínico educativo</div>
    </header>

    <!-- =========================
         Ventilación mecánica
    ========================== -->
    <section class="panel">
      <h2>Ventilación mecánica</h2>

      <h3>Peso ideal</h3>
      <label>Talla (cm)</label>
      <input type="number" id="talla" />

      <label>Sexo</label>
      <select id="sexo">
        <option value="">Seleccione</option>
        <option value="hombre">Hombre</option>
        <option value="mujer">Mujer</option>
      </select>

      <button onclick="calcularPesoIdeal()">Calcular peso ideal</button>
      <div id="resultadoPeso"></div>

      <hr />

      <h3>Ajuste de PCO₂ deseada</h3>
      <label>PCO₂ actual</label>
      <input type="number" id="pco2Act" />

      <label>PCO₂ deseada</label>
      <input type="number" id="pco2Des" />

      <div class="grid-2">
        <div>
          <label>FR</label>
          <input type="number" id="fr" />
        </div>
        <div>
          <label>VT (mL)</label>
          <input type="number" id="vt" />
        </div>
      </div>

      <label>VMIN (L/min)</label>
      <input type="number" id="vmin" />

      <div class="inline">
        <label class="radio"><input type="radio" name="ajuste" value="fr" checked /> Ajustar FR</label>
        <label class="radio"><input type="radio" name="ajuste" value="vt" /> Ajustar VT</label>
        <label class="radio"><input type="radio" name="ajuste" value="vmin" /> Ajustar VMIN</label>
      </div>

      <button onclick="ajustarPCO2()">Calcular ajuste</button>
      <div id="resultadoPCO2"></div>
    </section>

    <!-- =========================
         Ecocardiografía
    ========================== -->
    <section class="panel">
      <h2>Ecocardiografía · gasto cardíaco</h2>

      <h3>Gasto cardíaco por ecocardiografía</h3>

      <div class="grid-3">
        <div>
          <label>Diámetro TSVI (cm)</label>
          <input type="number" id="dtsvi" step="0.1" />
        </div>
        <div>
          <label>VTI TSVI (cm)</label>
          <input type="number" id="vti" step="0.1" />
        </div>
        <div>
          <label>Frecuencia cardíaca (lpm)</label>
          <input type="number" id="fc" step="1" />
        </div>
      </div>

      <button onclick="calcularGCEco()">Calcular GC por eco</button>
      <div id="resultadoGCEco"></div>
    </section>

    <!-- =========================
         Oxigenación (independiente)
    ========================== -->
    <section class="panel">
      <h2>Oxigenación · contenido de O₂</h2>

      <div class="grid-2">
        <div>
          <label>Gasto cardíaco (L/min)</label>
          <input type="number" id="gc" step="0.1" />
        </div>
        <div>
          <label>Hemoglobina (g/dL)</label>
          <input type="number" id="hb" step="0.1" />
        </div>
      </div>

      <div class="grid-2">
        <div>
          <label>SaO₂ (%)</label>
          <input type="number" id="sao2" />
        </div>
        <div>
          <label>SvO₂ (%)</label>
          <input type="number" id="svo2" />
        </div>
      </div>

      <div class="grid-2">
        <div>
          <label>PaO₂ (mmHg)</label>
          <input type="number" id="pao2" />
        </div>
        <div>
          <label>PvO₂ (mmHg)</label>
          <input type="number" id="pvo2" />
        </div>
      </div>

      <button onclick="calcularOxigenacion()">Calcular oxigenación</button>
      <div id="resultadoOxigenacion"></div>
    </section>

    <!-- =========================
         CO2 + Perfusión (independiente)
    ========================== -->
    <section class="panel">
      <h2>CO₂ · presiones · perfusión</h2>

      <h3>CO₂</h3>
      <div class="grid-2">
        <div>
          <label>PaCO₂ (mmHg)</label>
          <input type="number" id="paco2" />
        </div>
        <div>
          <label>PvCO₂ (mmHg)</label>
          <input type="number" id="pvco2" />
        </div>
      </div>

      <div class="grid-2">
        <div>
          <label>HCO₃⁻ arterial (mmol/L)</label>
          <input type="number" id="hco3a" />
        </div>
        <div>
          <label>HCO₃⁻ venoso (mmol/L)</label>
          <input type="number" id="hco3v" />
        </div>
      </div>

      <hr />

      <h3>Presiones</h3>
      <div class="grid-2">
        <div>
          <label>TAM (mmHg)</label>
          <input type="number" id="tam" />
        </div>
        <div>
          <label>PVC (mmHg)</label>
          <input type="number" id="pvc" />
        </div>
      </div>

      <div class="grid-2">
        <div>
          <label>PIA (mmHg)</label>
          <input type="number" id="pia" />
        </div>
        <div>
          <label>PIC (mmHg)</label>
          <input type="number" id="pic" />
        </div>
      </div>

      <button onclick="calcularPerfusion()">Calcular CO₂ y perfusión</button>
      <div id="resultadoPerfusion"></div>
    </section>

    <!-- =========================
         Estado ácido-base
    ========================== -->
    <section class="panel">
      <h2>Estado ácido - base</h2>
     

      <div class="card" style="margin-top:10px">
        <div class="card__title">PCO₂ esperada en acidosis metabólica</div>
        <div class="note">PCO₂ esperada = (1.5 × HCO₃a) + 8 (± 2)</div>
      </div>

      <div class="card" style="margin-top:10px">
        <div class="card__title">PCO₂ esperada en alcalosis metabólica</div>
        <div class="note">PCO₂ esperada = (0.7 × HCO₃a) + 21 (± 2)</div>
      </div>

      <div class="card" style="margin-top:10px">
        <div class="card__title">Acidosis respiratoria crónica</div>
        <div class="note">BICA esperado = (PCO₂a − 40) × 0.4</div>
      </div>

      <hr />

      <h3>Anion gap corregido por albúmina</h3>
      <div class="grid-2">
        <div>
          <label>Sodio Na (mEq/L)</label>
          <input type="number" id="na" step="0.1" />
        </div>
        <div>
          <label>Potasio K (mEq/L)</label>
          <input type="number" id="k" step="0.1" />
        </div>
      </div>

      <div class="grid-2">
        <div>
          <label>Cloro Cl (mEq/L)</label>
          <input type="number" id="cl" step="0.1" />
        </div>
        <div>
          <label>Bicarbonato HCO₃ (mEq/L)</label>
          <input type="number" id="hco3_ag" step="0.1" />
        </div>
      </div>

      <label>Albúmina sérica ALB (g/dL)</label>
      <input type="number" id="alb" step="0.1" />

      <button class="btn-secondary" onclick="calcularAnionGapCorregido()">Calcular anion gap corregido</button>
      <div id="resultadoAnionGap"></div>

      <hr />

      <h3>Delta gap / Delta bica</h3>
      <div class="grid-2">
        <div>
          <label>Bicarbonato normal (BICAn)</label>
          <input type="number" id="bican" value="24" step="0.1" />
        </div>
        <div>
          <label>Bicarbonato paciente (BICAp)</label>
          <input type="number" id="bicap" placeholder="Ej: 18" step="0.1" />
        </div>
      </div>

      <div class="grid-2">
        <div>
          <label>Anion gap normal (AGAPn)</label>
          <input type="number" id="agapn" value="14" step="0.1" />
        </div>
        <div>
          <label>Anion gap paciente (AGAPp)</label>
          <input type="number" id="agapp" placeholder="Ej: 20" step="0.1" />
        </div>
      </div>

      <button class="btn-secondary" onclick="calcularDeltaGap()">Calcular delta gap / delta bica</button>
      <div id="resultadoDeltaGap"></div>
    </section>

    <footer class="app-footer">
      <span>Hecho para uso educativo · Verifique siempre con guías y contexto clínico.</span>
    </footer>
  </div>

  <script src="app.js"></script>
  <!--
    PWA (opcional): si activás Service Worker, el navegador puede cachear archivos.
    Si estás iterando cambios y ves estilos “en blanco y negro” o funciones viejas,
    desactivá esto o recargá con hard refresh / borra el sitio de caché.

    Para activarlo, descomentá el bloque de abajo.
  -->
  <!--
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("service-worker.js");
    }
  </script>
  -->
</body>
</html>
